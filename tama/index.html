<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hamster Tamagotchi Final Fix</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      /* === í”„ë ˆì„ ì„¤ì • === */
      --frame-w: 673px;
      --frame-h: 673px;

      /* === [ìˆ˜ì • 1] ìƒë‹¨ í™”ë©´ ìœ„ì¹˜ ì•ˆì •í™” === */
      /* 98px(ë„ˆë¬´ ë†’ìŒ) -> 122px (ì•ˆì •ì ) */
      --screen-top-x: 138px;
      --screen-top-y: 98px; 
      --screen-top-w: 396px;
      --screen-top-h: 300px; 

      /* === í•˜ë‹¨ íŒ¨ë„ ìœ„ì¹˜ === */
      --panel-x: 142px;
      --panel-y: 408px;
      --panel-w: 390px;
      --panel-h: 135px;

      /* [í…Œë§ˆ] ê²Œì„ë³´ì´ ê·¸ë¦° */
      --color-bg: #9bbc0f;      
      --color-ui-bg: #8bac0f;   
      --color-text: #0f380f;    
      --exp-bar-bg: #306230;    
      --exp-bar-fill: #0f380f;  
    }

    body {
      margin: 0;
      height: 100vh;
      display: grid;
      place-items: center;
      background-color: #222;
      font-family: 'Press Start 2P', 'Noto Sans KR', sans-serif;
      overflow: hidden;
    }

    .device-container {
      position: relative;
      width: var(--frame-w);
      height: var(--frame-h);
      transform-origin: center center;
      transform: scale(0.8); 
    }

    /* === ë ˆì´ì–´ 1: ìƒë‹¨ í™”ë©´ === */
    .screen-top {
      position: absolute;
      left: var(--screen-top-x);
      top: var(--screen-top-y);
      width: var(--screen-top-w);
      height: var(--screen-top-h);
      background-color: var(--color-bg);
      z-index: 10;
      overflow: hidden; 
      border-radius: 25px 25px 10px 10px; 
    }

    .bg-image {
      width: 100%;
      height: 100%; 
      object-fit: cover;
      object-position: center bottom; 
      image-rendering: pixelated;
      display: block;
    }

    /* [ìˆ˜ì • 2] í–„ìŠ¤í„° ìœ„ì¹˜ ì¡°ì • */
    .hamster {
      position: absolute;
      width: 280px;  /* 300pxì€ ë„ˆë¬´ í´ ìˆ˜ ìˆì–´ 280px ìœ ì§€ */
      height: 280px;
      left: 50%; 
      /* 70%(ë„ˆë¬´ ë‚®ìŒ) -> 60% (ì ë‹¹í•¨) */
      top: 65%; 
      transform: translate(-50%, -50%);
      image-rendering: pixelated;
      z-index: 20;
    }


    .screen-bottom {
      position: absolute;
      left: var(--panel-x);
      top: var(--panel-y);
      width: var(--panel-w);
      height: var(--panel-h);
      background-color: var(--color-ui-bg);
      z-index: 10;
      border-radius: 5px 5px 30px 30px; 
      padding: 0; 
      display: flex;
      gap: 0; 
      color: var(--color-text);
      align-items: stretch; /* ìœ„ì•„ë˜ ê½‰ ì±„ìš°ê¸° */
    }

    /* === ë ˆì´ì–´ 3: í”„ë ˆì„ === */
    .layer-frame {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 100; 
      pointer-events: none; 
    }
    .layer-frame img { width: 100%; display: block; }

.panel-left {
      /* â˜… í•µì‹¬: ì •í™•íˆ ì ˆë°˜(50%)ì„ ì°¨ì§€í•˜ê²Œ ê°•ì œ ì„¤ì • */
      flex: 1;
      width: 50%; 
      
      display: flex;
      flex-direction: column;
      justify-content: center; 
      align-items: center; 
      
      /* ë‚´ìš©ë¬¼ ìœ„ì¹˜ ë¯¸ì„¸ ì¡°ì • (ìœ„ë¡œ ì‚´ì§) */
      padding-top: 0;
      padding-bottom: 15px;
      
      /* ì˜¤ë¥¸ìª½ ì ì„  (í™”ë©´ ì •ì¤‘ì•™ì— ìœ„ì¹˜í•˜ê²Œ ë¨) */
      border-right: 2px dashed rgba(15, 56, 15, 0.5); 
    }

/* 1. í†µê³„ ì •ë³´ í•œ ì¤„ (ì»¨í…Œì´ë„ˆ) */
    .stat-row {
      display: flex;
      align-items: baseline;  /* ê¸€ì ì•„ë˜ ë¼ì¸ ë§ì¶”ê¸° (EXPì™€ % ë†’ì´ ë§ì¶¤) */
      justify-content: space-between; /* ì–‘ìª½ ëìœ¼ë¡œ ë²Œë¦¬ê¸° */
      
      /* â˜… ì¤‘ìš”: ê²½í—˜ì¹˜ ë°”(exp-track)ì˜ ë„ˆë¹„ì™€ ë˜‘ê°™ì´ ë§ì¶”ì„¸ìš” (ì˜ˆ: 100px or 120px) */
      width: 100px; 
      
      margin-bottom: 2px;
    }

    /* 2. ì•ìª½ ê¸€ì ("LV", "EXP") ìŠ¤íƒ€ì¼ */
    .stat-row span:first-child {
      font-size: 14px; /* ì¡°ê¸ˆ í‚¤ì›Œì„œ ì œëª©ë‹µê²Œ */
      font-weight: bold;
      color: #0f380f;  /* ì§„í•œ ê²Œì„ë³´ì´ ë…¹ìƒ‰ */
    }

    /* 3. ë’¤ìª½ ê¸€ì (í¼ì„¼íŠ¸ ìˆ«ì "%") ìŠ¤íƒ€ì¼ */
    #expText {
      font-size: 10px; 
      color: #306230; /* ì•½ê°„ ì—°í•œ ìƒ‰ìœ¼ë¡œ í˜ ë¹¼ê¸° */
      font-weight: normal;
    } 
/* 4. ë ˆë²¨ ìˆ«ì ("10") ìŠ¤íƒ€ì¼ */
.val-level { 
      font-size: 16px; 
      color: #d32f2f;   /* ë¹¨ê°„ìƒ‰ ê°•ì¡° */
      text-shadow: 1px 1px 0px rgba(0,0,0,0.1);
    }

/* ê²½í—˜ì¹˜ ë°” ê¸¸ì´ ë° ë‘ê»˜ í™•ëŒ€ */
.exp-track {
      width: 120px; /* ê¸°ì¡´ 100px -> 120px (ë” ê¸¸ê²Œ) */
      height: 14px; /* ê¸°ì¡´ 10px -> 14px (ë” ë‘ê»ê²Œ) */
      background: var(--exp-bar-bg);
      border: 2px solid var(--color-text);
      border-radius: 4px;
      position: relative;
      overflow: hidden;
    }
    .exp-fill {
      height: 100%;
      width: 0%;
      background-color: var(--exp-bar-fill);
      transition: width 0.3s;
    }

 /* [ìˆ˜ì • 1] ì˜¤ë¥¸ìª½ íŒ¨ë„ ìœ„ì¹˜ ì¡°ì • (ì „ì²´ë¥¼ ì•„ë˜ë¡œ ë‚´ë¦¼) */
 .panel-right {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: flex-start;
      
      /* â˜… í•µì‹¬: 6px -> 18pxë¡œ ëŠ˜ë ¤ì„œ íƒ€ì´í‹€ì´ ê°€ë ¤ì§€ì§€ ì•Šê²Œ í‘¹ ë‚´ë¦¼ */
      padding-top: 10px; 
      
      padding-left: 20px; 
      overflow: hidden;
    }

    .log-title {
      font-size: 8px;
      /* â˜… í•µì‹¬: ì´ ìˆ«ìë¥¼ ëŠ˜ë¦¬ë©´ íƒ€ì´í‹€ì´ ì•„ë˜ë¡œ ë‚´ë ¤ì˜µë‹ˆë‹¤ */
      margin-top: 5px;
      margin-bottom: 10px;
      opacity: 0.6;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

/* [ìˆ˜ì • 2] ë¡œê·¸ ë‚´ìš© (íƒ€ì´í‹€ê³¼ ê°„ê²© ì¢íˆê¸°) */
.log-content {
      width: 100%;
      flex: 1;
      font-family: 'Noto Sans KR', sans-serif;
      overflow-y: auto;
      
      font-size: 11px;
      line-height: 1.5;
      
      padding-bottom: 5px; 
      scrollbar-width: none; 
      
      display: flex;
      flex-direction: column;
      justify-content: flex-start; 
      
      /* â˜… í•µì‹¬: íƒ€ì´í‹€ê³¼ ë‚´ìš© ì‚¬ì´ ê°„ê²©ì„ 2pxë¡œ ì¢í˜ (ì°© ë¶™ì´ê¸°) */
      gap: 2px; 
      
      /* ë‚´ë¶€ ì—¬ë°± ì œê±° (íƒ€ì´í‹€ ë°”ë¡œ ë°‘ì— ì˜¤ë„ë¡) */
      padding-top: 0; 
    }
    .log-content::-webkit-scrollbar { display: none; }
    
    .log-item { margin-bottom: 3px; }
    .log-item.new { color: #d32f2f; font-weight: bold; animation: flash 0.5s; }
    @keyframes flash { 0% { opacity: 0; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

    /* ë²„íŠ¼ ì˜ì—­ */
    .btn-area {
      position: absolute;
      bottom: 85px;
      width: 60px;
      height: 60px;
      z-index: 200;
      cursor: pointer;
      border-radius: 50%;
    }
    .btn-a { left: 190px; }
    .btn-b { left: 305px; }
    .btn-c { left: 420px; }

    .bounce { animation: bounce 2s infinite ease-in-out; }
    @keyframes bounce { 
      0%, 100% { transform: translate(-50%, -50%) translateY(0); } 
      50% { transform: translate(-50%, -50%) translateY(-6px); } 
    }
  </style>
</head>
<body>

  <div class="device-container" id="device">
    
    <div class="screen-top">
      <img src="./assets/bg.png" class="bg-image" alt="ë°°ê²½">
      <img src="./assets/normal.png" class="hamster bounce" id="hamster" alt="í–„ìŠ¤í„°">
    </div>

    <div class="screen-bottom">
      <div class="panel-left">
        <div class="stat-row">
          <span>LV.</span>
          <span class="val-level" id="uiLevel">10</span>
        </div>

        <div class="stat-row">
          <span>EXP</span>
          <span id="expText">20%</span>
        </div>

        <div class="exp-track">
          <div class="exp-fill" id="uiExp"></div>
        </div>
      </div>
      <div class="panel-right">
        <div class="log-title">SYSTEM LOG</div>
        <div class="log-content" id="uiLog">
          <div>> ì‹œìŠ¤í…œ ê°€ë™..</div>
          <div>> í–„ìŠ¤í„°ê°€ ê¸°ë‹¤ë ¤ìš”!</div>
        </div>
      </div>
    </div>

    <div class="layer-frame">
      <img src="./assets/frame.png" alt="Frame">
    </div>

    <div class="btn-area btn-a" onclick="handleBtn('A')" title="ë°¥ì£¼ê¸°"></div>
    <div class="btn-area btn-b" onclick="handleBtn('B')" title="ì“°ë‹¤ë“¬ê¸°"></div>
    <div class="btn-area btn-c" onclick="handleBtn('C')" title="ë†€ì•„ì£¼ê¸°"></div>

  </div>

  <script>
    const hamster = document.getElementById('hamster');
    const uiLevel = document.getElementById('uiLevel');
    const uiExp = document.getElementById('uiExp');
    const expText = document.getElementById('expText');
    const uiLog = document.getElementById('uiLog');

    let game = { level: 10, exp: 20, maxExp: 100, isBusy: false };

    function init() {
      updateUI();
      fitScale();
      window.addEventListener('resize', fitScale);
    }

    function fitScale() {
      const device = document.getElementById('device');
      const scale = Math.min(window.innerWidth / 700, window.innerHeight / 750);
      device.style.transform = `scale(${scale})`;
    }

    function handleBtn(btn) {
      if(game.isBusy) return;
      game.isBusy = true;

      // [ì£¼ì˜] í´ë”ì— eat.png, happy.png íŒŒì¼ì´ ê¼­ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
      if(btn === 'A') {
        log("ëƒ ëƒ ! í•´ë°”ë¼ê¸°ì”¨ ë§›ìˆë‹¤ +10");
        changeAction('./assets/eat.png', 2000);
        addExp(10);
      } else if(btn === 'B') {
        log("ì“°ë‹´ì“°ë‹´.. ê¸°ë¶„ ìµœê³ ! +5");
        changeAction('./assets/happy.png', 2000);
        addExp(5);
      } else if(btn === 'C') {
        log("ì³‡ë°”í€´ ëŒë¦¬ê¸°! ì˜ì°¨ì˜ì°¨ +15");
        changeAction('./assets/happy.png', 2000); 
        addExp(15);
      }
    }

    /* [ìˆ˜ì • 4] ì´ë¯¸ì§€ ì‚¬ë¼ì§ ë°©ì§€ ì½”ë“œ ì¶”ê°€ */
    function changeAction(imgSrc, duration) {
      const originalSrc = './assets/normal.png';
      hamster.src = imgSrc;
      hamster.classList.remove('bounce');
      
      // ì´ë¯¸ì§€ê°€ ê¹¨ì§€ë©´(404 ì—ëŸ¬ ë“±) ì¦‰ì‹œ ì›ë˜ëŒ€ë¡œ ë³µêµ¬
      hamster.onerror = function() {
        console.warn("ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:", imgSrc);
        log("âš  ì˜¤ë¥˜: ì´ë¯¸ì§€ê°€ ì—†ì–´ìš”!");
        hamster.src = originalSrc;
        hamster.classList.add('bounce');
        game.isBusy = false;
      };

      setTimeout(() => {
        hamster.src = originalSrc;
        hamster.classList.add('bounce');
        game.isBusy = false;
        hamster.onerror = null; // í•¸ë“¤ëŸ¬ ì´ˆê¸°í™”
      }, duration);
    }

    function addExp(amount) {
      game.exp += amount;
      if(game.exp >= game.maxExp) {
        game.level++;
        game.exp -= game.maxExp;
        log(`ğŸ”¥ ë ˆë²¨ ì—…! LV.${game.level}ğŸ”¥`);
      }
      updateUI();
    }

    function updateUI() {
      uiLevel.innerText = game.level;
      const pct = Math.min(100, (game.exp / game.maxExp) * 100);
      uiExp.style.width = `${pct}%`;
      expText.innerText = `${Math.floor(pct)}%`;
    }

    function log(msg) {
      const item = document.createElement('div');
      item.className = 'log-item new';
      item.innerText = `> ${msg}`;
      uiLog.prepend(item);
      if(uiLog.children.length > 20) uiLog.removeChild(uiLog.lastChild);
    }

    init();
  </script>
</body>
</html>
.cursorrules

# 프로젝트 규칙 (Project Rules: Notion Tamagotchi)

## 1. 기술 스택 & 환경 (Tech Stack)
- **Core:** 순수 HTML, CSS, JavaScript (Vanilla JS).
- **Backend:** Vercel Serverless Function (`api/game.js`) 사용.
- **Library:** 픽셀 아트 렌더링을 위해 필요 시 `Canvas API` 사용.
- **Persistence:** 게임 데이터(레벨, 경험치)는 'Notion 데이터베이스' 자체를 세이브 파일로 활용하거나, `localStorage`에 1차 저장 후 서버에 동기화한다.

## 2. 날짜 및 시간 로직 (절대 규칙)
- 다마고치의 '하루 주기(수면/리셋)'와 노션의 '오늘 할 일' 기준을 맞추기 위해 **한국 시간(KST)**을 엄수한다.
- 날짜 생성 함수:
  ```javascript
  function getTodayISO() {
    return new Date().toLocaleDateString('sv-SE', { timeZone: 'Asia/Seoul' });
  }
3. 게임 메카닉 & 연동 규칙 (Game Mechanics)
멀티 DB 연동:

단일 DB가 아니라 '할 일(Tasks)', '습관(Habits)', '독서(Books)' 등 여러 노션 DB의 완료 상태를 취합해야 한다.

백엔드(api/game.js)에서 여러 DB를 병렬로 조회(Promise.all)하여 총 '완료 개수'를 계산한다.

경험치(XP) 로직:

단순 클릭질(체크/해제 반복)로 인한 무한 레벨업 방지(Abuse Prevention) 로직 필수.

방식: "오늘 완료한 총 개수 * N점" 방식으로 현재 상태(Snapshot)를 점수화한다. (예: 완료 5개 = 50점. 1개 취소하면 40점으로 하락)

레벨업 및 진화:

레벨 제한 없음 (Infinite Leveling).

특정 레벨 도달 시 햄스터 이미지/스프라이트 변경 (예: Lv.1 알 -> Lv.10 아기 햄스터 -> Lv.30 골든 햄스터 -> Lv.100 햄스터 킹).

4. 데이터 무결성 & 최적화
API 호출 최소화: 게임이라 자주 확인하고 싶겠지만, 노션 API 부하를 줄이기 위해 1분 미만 자동 갱신 금지 (수동 '밥주기/동기화' 버튼 권장).

낙관적 UI (Optimistic UI): 사용자가 노션에서 체크 후 위젯을 클릭하면, 서버 응답 전이라도 경험치 바가 먼저 차오르는 애니메이션을 보여준다.

5. 디자인 & 애니메이션 (Visuals)
테마: 8-bit 레트로 픽셀 아트 스타일 (햄스터).

상태 표현:

대기(Idle): 햄스터가 숨을 쉬거나 눈을 깜빡임.

식사(Eating): 경험치 획득 시 해바라기 씨를 먹는 모션.

진화(Evolve): 반짝이는 이펙트와 함께 외형 변경.

폰트: 한글은 'Noto Sans KR', 숫자는 'Press Start 2P' 사용.